<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gss_user">
	<resultMap id="BaseResultMap" type="com.tcxt.gss.user.bean.GssUser">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		<id column="sid" jdbcType="INTEGER" property="sid" />
		<result column="user_id" jdbcType="VARCHAR" property="userId" />
		<result column="user_name" jdbcType="VARCHAR" property="userName" />
		<result column="sex" jdbcType="INTEGER" property="sex" />
		<result column="password" jdbcType="VARCHAR" property="password" />
		<result column="user_level" jdbcType="INTEGER" property="userLevel" />
		<result column="user_phone" jdbcType="VARCHAR" property="userPhone" />
		<result column="user_telephone" jdbcType="VARCHAR" property="userTelephone" />
		<result column="city_code" jdbcType="VARCHAR" property="cityCode" />
		<result column="role_id" jdbcType="INTEGER" property="roleId" />
		<result column="city_full_name" jdbcType="VARCHAR" property="cityFullName" />
		<result column="city_short_name" jdbcType="VARCHAR" property="cityShortName" />
		<result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
		<result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
		<result column="user_email" jdbcType="VARCHAR" property="userEmail" />
		<result column="company_name" jdbcType="VARCHAR" property="companyName" />
		<result column="online_status" jdbcType="INTEGER" property="onlineStatus" />
		<result column="delete_status" jdbcType="INTEGER" property="deleteStatus" />
	</resultMap>
	<resultMap extends="BaseResultMap" id="ResultMapWithBLOBs"
		type="com.tcxt.gss.user.bean.GssUser">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		<result column="remark" jdbcType="LONGVARCHAR" property="remark" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		sid, user_id, user_name, sex, password, user_level, user_phone,
		user_telephone, city_code,
		role_id, city_full_name, city_short_name, create_time, update_time,
		user_email, company_name,
		online_status, delete_status
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		remark
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="ResultMapWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from user
		where sid = #{sid,jdbcType=INTEGER}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		delete from user
		where sid = #{sid,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.tcxt.gss.user.bean.GssUser">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		insert into user (sid, user_id, user_name,
		sex, password, user_level,
		user_phone, user_telephone, city_code,
		role_id, city_full_name, city_short_name,
		create_time, update_time, user_email,
		company_name, online_status, delete_status,
		remark)
		values (#{sid,jdbcType=INTEGER}, #{userId,jdbcType=VARCHAR},
		#{userName,jdbcType=VARCHAR},
		#{sex,jdbcType=INTEGER}, #{password,jdbcType=VARCHAR}, #{userLevel,jdbcType=INTEGER},
		#{userPhone,jdbcType=VARCHAR}, #{userTelephone,jdbcType=VARCHAR},
		#{cityCode,jdbcType=VARCHAR},
		#{roleId,jdbcType=INTEGER}, #{cityFullName,jdbcType=VARCHAR}, #{cityShortName,jdbcType=VARCHAR},
		#{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP},
		#{userEmail,jdbcType=VARCHAR},
		#{companyName,jdbcType=VARCHAR}, #{onlineStatus,jdbcType=INTEGER}, #{deleteStatus,jdbcType=INTEGER},
		#{remark,jdbcType=LONGVARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.tcxt.gss.user.bean.GssUser"
		useGeneratedKeys="true" keyProperty="sid">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		insert into user
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="sid != null">
				sid,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="userName != null">
				user_name,
			</if>
			<if test="sex != null">
				sex,
			</if>
			<if test="password != null">
				password,
			</if>
			<if test="userLevel != null">
				user_level,
			</if>
			<if test="userPhone != null">
				user_phone,
			</if>
			<if test="userTelephone != null">
				user_telephone,
			</if>
			<if test="cityCode != null">
				city_code,
			</if>
			<if test="roleId != null">
				role_id,
			</if>
			<if test="cityFullName != null">
				city_full_name,
			</if>
			<if test="cityShortName != null">
				city_short_name,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
			<if test="userEmail != null">
				user_email,
			</if>
			<if test="companyName != null">
				company_name,
			</if>
			<if test="onlineStatus != null">
				online_status,
			</if>
			<if test="deleteStatus != null">
				delete_status,
			</if>
			<if test="remark != null">
				remark,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="sid != null">
				#{sid,jdbcType=INTEGER},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				#{sex,jdbcType=INTEGER},
			</if>
			<if test="password != null">
				#{password,jdbcType=VARCHAR},
			</if>
			<if test="userLevel != null">
				#{userLevel,jdbcType=INTEGER},
			</if>
			<if test="userPhone != null">
				#{userPhone,jdbcType=VARCHAR},
			</if>
			<if test="userTelephone != null">
				#{userTelephone,jdbcType=VARCHAR},
			</if>
			<if test="cityCode != null">
				#{cityCode,jdbcType=VARCHAR},
			</if>
			<if test="roleId != null">
				#{roleId,jdbcType=INTEGER},
			</if>
			<if test="cityFullName != null">
				#{cityFullName,jdbcType=VARCHAR},
			</if>
			<if test="cityShortName != null">
				#{cityShortName,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="updateTime != null">
				#{updateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="userEmail != null">
				#{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="companyName != null">
				#{companyName,jdbcType=VARCHAR},
			</if>
			<if test="onlineStatus != null">
				#{onlineStatus,jdbcType=INTEGER},
			</if>
			<if test="deleteStatus != null">
				#{deleteStatus,jdbcType=INTEGER},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.tcxt.gss.user.bean.GssUser">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		update user
		<set>
			<if test="userId != null">
				user_id = #{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				sex = #{sex,jdbcType=INTEGER},
			</if>
			<if test="password != null">
				password = #{password,jdbcType=VARCHAR},
			</if>
			<if test="userLevel != null">
				user_level = #{userLevel,jdbcType=INTEGER},
			</if>
			<if test="userPhone != null">
				user_phone = #{userPhone,jdbcType=VARCHAR},
			</if>
			<if test="userTelephone != null">
				user_telephone = #{userTelephone,jdbcType=VARCHAR},
			</if>
			<if test="cityCode != null">
				city_code = #{cityCode,jdbcType=VARCHAR},
			</if>
			<if test="roleId != null">
				role_id = #{roleId,jdbcType=INTEGER},
			</if>
			<if test="cityFullName != null">
				city_full_name = #{cityFullName,jdbcType=VARCHAR},
			</if>
			<if test="cityShortName != null">
				city_short_name = #{cityShortName,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				create_time = #{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="userEmail != null">
				user_email = #{userEmail,jdbcType=VARCHAR},
			</if>
			<if test="companyName != null">
				company_name = #{companyName,jdbcType=VARCHAR},
			</if>
			<if test="onlineStatus != null">
				online_status = #{onlineStatus,jdbcType=INTEGER},
			</if>
			<if test="deleteStatus != null">
				delete_status = #{deleteStatus,jdbcType=INTEGER},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where sid = #{sid,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.tcxt.gss.user.bean.GssUser">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		update user
		set user_id = #{userId,jdbcType=VARCHAR},
		user_name = #{userName,jdbcType=VARCHAR},
		sex = #{sex,jdbcType=INTEGER},
		password = #{password,jdbcType=VARCHAR},
		user_level = #{userLevel,jdbcType=INTEGER},
		user_phone = #{userPhone,jdbcType=VARCHAR},
		user_telephone = #{userTelephone,jdbcType=VARCHAR},
		city_code = #{cityCode,jdbcType=VARCHAR},
		role_id = #{roleId,jdbcType=INTEGER},
		city_full_name = #{cityFullName,jdbcType=VARCHAR},
		city_short_name = #{cityShortName,jdbcType=VARCHAR},
		create_time = #{createTime,jdbcType=TIMESTAMP},
		update_time = #{updateTime,jdbcType=TIMESTAMP},
		user_email = #{userEmail,jdbcType=VARCHAR},
		company_name = #{companyName,jdbcType=VARCHAR},
		online_status = #{onlineStatus,jdbcType=INTEGER},
		delete_status = #{deleteStatus,jdbcType=INTEGER},
		remark = #{remark,jdbcType=LONGVARCHAR}
		where sid = #{sid,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.tcxt.gss.user.bean.GssUser">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Oct 31 
			14:52:12 CST 2016. -->
		update user
		set user_id = #{userId,jdbcType=VARCHAR},
		user_name = #{userName,jdbcType=VARCHAR},
		sex = #{sex,jdbcType=INTEGER},
		password = #{password,jdbcType=VARCHAR},
		user_level = #{userLevel,jdbcType=INTEGER},
		user_phone = #{userPhone,jdbcType=VARCHAR},
		user_telephone = #{userTelephone,jdbcType=VARCHAR},
		city_code = #{cityCode,jdbcType=VARCHAR},
		role_id = #{roleId,jdbcType=INTEGER},
		city_full_name = #{cityFullName,jdbcType=VARCHAR},
		city_short_name = #{cityShortName,jdbcType=VARCHAR},
		create_time = #{createTime,jdbcType=TIMESTAMP},
		update_time = #{updateTime,jdbcType=TIMESTAMP},
		user_email = #{userEmail,jdbcType=VARCHAR},
		company_name = #{companyName,jdbcType=VARCHAR},
		online_status = #{onlineStatus,jdbcType=INTEGER},
		delete_status = #{deleteStatus,jdbcType=INTEGER}
		where sid = #{sid,jdbcType=INTEGER}
	</update>
	<select id="getUser" parameterType="hashMap" resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		from user
		where 1=1 and user_id = #{userId,jdbcType=VARCHAR} and password =
		#{password,jdbcType=VARCHAR} and delete_status = 0
	</select>
	<select id="queryUser" parameterType="hashMap" resultType="java.util.HashMap">
		select
		u.sid,u.user_name as userName,u.sex,u.user_phone as userPhone,u.company_name as
		companyName
		,u.user_id as userId,u.city_code as cityCode,u.city_full_name as cityFullName
		,u.user_level as userLevel
		,r.name as roleName ,u.online_status as onlineStatus
		from user u,role r where u.role_id = r.id and delete_status = 0
		<if test="roleId!=null">
			and u.role_id = #{roleId,jdbcType=INTEGER}
		</if>
		<if test="cityCode!=null and cityCode!='' and userLevel!=0">
			and u.city_code like '${cityCode}' and u.city_code
			!=#{curCityCode,jdbcType=VARCHAR}
		</if>
		<if test="cityCode!=null and cityCode!='' and userLevel==0">
			and u.city_code like '${cityCode}'
		</if>
		<if test="sort!=''">
			order by ${sort}
			<if test="order!=''">
				${order}
			</if>
		</if>
	</select>


	<update id="deleteUserById" parameterType="java.lang.Integer">
		update user set delete_status = 1 where sid =
		#{userId,jdbcType=INTEGER};
	</update>

	<update id="updateUserOnlineStatus" parameterType="hashMap">
		update user set online_status = #{onlineStatus,jdbcType=INTEGER} where
		sid = #{userId,jdbcType=INTEGER};
	</update>

	<update id="clearPwd" parameterType="hashMap">
		update user set password = #{pwd,jdbcType=VARCHAR} where sid in
		<foreach item="item" index="index" collection="sids" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</update>
</mapper>